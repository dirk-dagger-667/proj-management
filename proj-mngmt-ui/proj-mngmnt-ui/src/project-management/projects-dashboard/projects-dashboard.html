<mat-sidenav-container class="sidenav-container">
  <!-- Sidebar: Projects -->
  <mat-sidenav mode="side" opened position="start" class="sidebar">
    <mat-nav-list>
      <h1 matSubheader>Projects</h1>
      @for (project of projects(); track project.id) {
      <a
        mat-list-item
        (click)="selectProject(project)"
        [class.active]="project.id === selectedProject()?.id"
      >
        <mat-icon matListItemIcon>folder</mat-icon>
        <span matListItemTitle>{{ project.title }}</span>
      </a>
      }
    </mat-nav-list>
  </mat-sidenav>

  <!-- Main Tasks Content -->
  <mat-sidenav-content>
    @if (selectedProject(); as project) {
    <h2>{{ project.title }} Tasks</h2>

    @if (loading()) {
    <mat-spinner></mat-spinner>
    } @else {
    <mat-tab-group>
      <mat-tab label="List View">
        <app-tasks-list
          [tasksInput]="tasks()"
          [searchTermInput]="searchTerm()"
          (taskIdOutput)="onTaskSelected($event)"
          (searchTermOutput)="onSearch($event)"
        ></app-tasks-list>
      </mat-tab>
      <mat-tab label="Board View">
        <app-projects-board [tasksInput]="tasks()" (taskIdOutput)="onTaskSelected($event)">
        </app-projects-board>
      </mat-tab>
    </mat-tab-group>
    } } @else {
    <p>Select a project from the sidebar.</p>
    }
  </mat-sidenav-content>
</mat-sidenav-container>
